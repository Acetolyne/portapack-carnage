<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Portapack-Carnage: Mutexes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Portapack-Carnage
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Mutexes<div class="ingroups"><a class="el" href="group__kernel.html">Kernel</a> &raquo; <a class="el" href="group__synchronization.html">Synchronization</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Mutexes:</div>
<div class="dyncontent">
<div class="center"><img src="group__mutexes.png" border="0" usemap="#group____mutexes" alt=""/></div>
<map name="group____mutexes" id="group____mutexes">
<area shape="rect" href="group__synchronization.html" title=" " alt="" coords="5,5,132,31"/>
<area shape="rect" title=" " alt="" coords="180,5,259,31"/>
</map>
</div>
<p>Mutexes related APIs and services. </p><pre class="fragment">     &lt;h2&gt;Operation mode&lt;/h2&gt;
     A mutex is a threads synchronization object that can be in two
     distinct states:
     - Not owned (unlocked).
     - Owned by a thread (locked).
     .
     Operations defined for mutexes:
     - &lt;b&gt;Lock&lt;/b&gt;: The mutex is checked, if the mutex is not owned by
       some other thread then it is associated to the locking thread
       else the thread is queued on the mutex in a list ordered by
       priority.
     - &lt;b&gt;Unlock&lt;/b&gt;: The mutex is released by the owner and the highest
       priority thread waiting in the queue, if any, is resumed and made
       owner of the mutex.
     .
     &lt;h2&gt;Constraints&lt;/h2&gt;
     In ChibiOS/RT the Unlock operations are always performed in
     lock-reverse order. The unlock API does not even have a parameter,
     the mutex to unlock is selected from an internal, per-thread, stack
     of owned mutexes. This both improves the performance and is
     required for an efficient implementation of the priority
     inheritance mechanism.

     &lt;h2&gt;The priority inversion problem&lt;/h2&gt;
     The mutexes in ChibiOS/RT implements the &lt;b&gt;full&lt;/b&gt; priority
     inheritance mechanism in order handle the priority inversion
     problem.&lt;br&gt;
     When a thread is queued on a mutex, any thread, directly or
     indirectly, holding the mutex gains the same priority of the
     waiting thread (if their priority was not already equal or higher).
     The mechanism works with any number of nested mutexes and any
     number of involved threads. The algorithm complexity (worst case)
     is N with N equal to the number of nested mutexes.
</pre> <dl class="section pre"><dt>Precondition</dt><dd>In order to use the mutex APIs the <code>CH_USE_MUTEXES</code> option must be enabled in <code>chconf.h</code>. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>Enabling mutexes requires 5-12 (depending on the architecture) extra bytes in the <code><a class="el" href="structThread.html" title="Structure representing a thread.">Thread</a></code> structure. </dd></dl>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
