<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Portapack-Carnage: ICU Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Portapack-Carnage
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a>  </div>
  <div class="headertitle">
<div class="title">ICU Driver<div class="ingroups"><a class="el" href="group__IO.html">HAL</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Generic ICU Driver.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for ICU Driver:</div>
<div class="dyncontent">
<div class="center"><img src="group__ICU.png" border="0" usemap="#group____ICU" alt=""/></div>
<map name="group____ICU" id="group____ICU">
<area shape="rect" href="group__IO.html" title="Hardware Abstraction Layer." alt="" coords="5,5,53,31"/>
<area shape="rect" title="Generic ICU Driver." alt="" coords="101,5,191,31"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspc5__etimer__submodule.html">spc5_etimer_submodule</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPC5 FlexPWM registers block.  <a href="structspc5__etimer__submodule.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspc5__etimer.html">spc5_etimer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Generic ICU Driver. </p>
<p>This module implements a generic ICU (Input Capture Unit) driver. </p><dl class="section pre"><dt>Precondition</dt><dd>In order to use the ICU driver the <code>HAL_USE_ICU</code> option must be enabled in <code>halconf.h</code>.</dd></dl>
<h1><a class="anchor" id="icu_1"></a>
Driver State Machine</h1>
<p>The driver implements a state machine internally, not all the driver functionalities can be used in any moment, any transition not explicitly shown in the following diagram has to be considered an error and shall be captured by an assertion (if enabled). </p><div class="dotgraph">
<img src="dot_inline_dotgraph_11.png" alt="dot_inline_dotgraph_11.png" border="0" usemap="#dot_inline_dotgraph_11.map"/>
</div>
<h1><a class="anchor" id="icu_2"></a>
ICU Operations.</h1>
<p>This driver abstracts a generic Input Capture Unit composed of:</p><ul>
<li>A clock prescaler.</li>
<li>A main up counter.</li>
<li>Two capture registers triggered by the rising and falling edges on the sampled input.</li>
</ul>
<p>The ICU unit can be programmed to synchronize on the rising or falling edge of the sample input:</p><ul>
<li><b>ICU_INPUT_ACTIVE_HIGH</b>, a rising edge is the start signal.</li>
<li><b>ICU_INPUT_ACTIVE_LOW</b>, a falling edge is the start signal.</li>
</ul>
<p>After the activation the ICU unit can be in one of the following states at any time:</p><ul>
<li><b>ICU_WAITING</b>, waiting the first start signal.</li>
<li><b>ICU_ACTIVE</b>, after a start signal.</li>
<li><b>ICU_IDLE</b>, after a stop signal.</li>
</ul>
<p>Callbacks are invoked when start or stop signals occur. </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
