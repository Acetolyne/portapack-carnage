<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Portapack-Carnage: PortaPack Carnage</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Portapack-Carnage
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">PortaPack Carnage </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is a fork of the <a href="https://github.com/eried/portapack-mayhem/">Mayhem</a> firmware, which itself was a fork of the <a href="https://github.com/sharebrained/portapack-hackrf">PortaPack</a> firmware, an add-on for the <a href="http://greatscottgadgets.com/hackrf/">HackRF</a>. A fork is a derivate, in this case one that has extra features and fixes when compared to the older versions.</p>
<p><a href="https://github.com/eried/portapack-mayhem/wiki/Hardware-overview"><img src="https://raw.githubusercontent.com/wiki/eried/portapack-mayhem/img/hw_overview_h2_front.png" alt="" height="400" class="inline"/></a> <a href="https://github.com/eried/portapack-mayhem/wiki/Hardware-overview#portapack-internals"><img src="https://raw.githubusercontent.com/wiki/eried/portapack-mayhem/img/hw_overview_h2_inside.png" alt="" height="400" class="inline"/></a></p>
<p><em><a href="https://s.click.aliexpress.com/e/_dSMPvNo">PortaPack H2</a> (clone) with a custom <a href="https://github.com/eried/portapack-mayhem/wiki/H2-Enclosure">3d printed case</a></em></p>
<h1><a class="anchor" id="autotoc_md23"></a>
Quick overview</h1>
<h2><a class="anchor" id="autotoc_md24"></a>
Does it work on H1/H2 PortaPack?</h2>
<p>Yes, both devices are the <a href="https://github.com/eried/portapack-mayhem/wiki/First-steps">same</a>. The one I am using to test all changes is this <a href="https://s.click.aliexpress.com/e/_dSMPvNo">PortaPack H2+HackRF+battery</a>, which is a kit that includes everything you need. Sadly, the people making the H2 never made the updated schematics available, which is not ideal (and goes against the terms of the license).</p>
<p>To support the people behind the hardware, please buy a genuine <a href="https://greatscottgadgets.com/hackrf/">HackRF</a> and <a href="https://store.sharebrained.com/products/portapack-for-hackrf-one-kit">PortaPack</a>.</p>
<h2><a class="anchor" id="autotoc_md25"></a>
What about Havoc/GridRF/jamesshao8/jboone's?</h2>
<ul>
<li>jboone's PortaPack: the <a href="https://en.wikipedia.org/wiki/Vanilla_software">vanilla</a> experience</li>
<li>Havoc: It was the most popular fork of jboone's PortaPack, currrently, it is not being maintained nor updated</li>
<li>jamesshao8: He keeps his own version of the fork, while not attached as a fork to anything</li>
<li>GridRF: They sell PortaPack clones with their own firmware based on a old version, which has no sourcecode available</li>
</ul>
<h2><a class="anchor" id="autotoc_md26"></a>
Resources</h2>
<p>You can reach the <a href="https://www.facebook.com/groups/177623356165819">official community</a> in Facebook.</p>
<h2><a class="anchor" id="autotoc_md27"></a>
Tools</h2>
<p>You will need a few tools installed on your computer before you begin. </p><pre class="fragment">GCC-ARM-Embedded - I am using the "9-2019-q4-major" release.
CMake 2.8.9 or newer - Build system now uses CMake instead of GNU Make.
PyYAML for Python 2.7 (for libopencm3, built by hackrf submodule).
dfu-util 0.7 or newer - Used to load and run the stock HackRF firmware from RAM.
</pre><h2><a class="anchor" id="autotoc_md28"></a>
Getting the Source Code</h2>
<p>The source code is hosted on GitHub. Change to a directory where you want the source code, and clone the source repository.</p>
<p>git clone &ndash;recurse-submodules <a href="https://github.com/Acetolyne/portapack-carnage.git">https://github.com/Acetolyne/portapack-carnage.git</a></p>
<p>Change directories into the cloned repository.</p>
<p>cd portapack-hackrf</p>
<h2><a class="anchor" id="autotoc_md29"></a>
Building</h2>
<p>Make a "build" directory and initialize the CMake build files into that directory:</p>
<p>mkdir build</p>
<p>cd build</p>
<p>cmake ..</p>
<p>Make the <a class="el" href="classSPI.html">SPI</a> flash binary image (which builds the bootstrap, application, and baseband binaries):</p>
<p>make firmware</p>
<p>The binary will be at "firmware/portapack-carnage.bin". under the build directory that you are currently in.</p>
<h2><a class="anchor" id="autotoc_md30"></a>
Flashing Firmware</h2>
<p>Once you have built the binary, you must program it into the HackRF One <a class="el" href="classSPI.html">SPI</a> flash. Flashing</p>
<p>If you do not already have the firmware on your HackRF the follow the "install firmware" instructions. If you previously had the firmware and only want to update it with the latest and greatest then follow the "update firmware" instructions below.</p>
<h3><a class="anchor" id="autotoc_md31"></a>
Install Firmware for Linux</h3>
<p>install dfu-util typically with <code>sudo apt install dfu-util</code></p>
<p>Plug the HackRF into a USB port on your computer.</p>
<p>Hold down the HackRF DFU button. Press and release the HackRF reset button. Wait a second or two. Then release the DFU button. The HackRF is now in DFU mode.</p>
<p>Program the HackRF's <a class="el" href="classSPI.html">SPI</a> flash:</p>
<p>make program</p>
<p>When finished, press the reset button on the HackRF. The PortaPack code is now running from the <a class="el" href="classSPI.html">SPI</a> flash on the HackRF.</p>
<h3><a class="anchor" id="autotoc_md32"></a>
Update firmware</h3>
<ol type="1">
<li>Put the HackRF into DFU mode by doing one of the below.</li>
</ol>
<ul>
<li>In the havoc UI go to the main menu and choose HackRF and choose yes when it asks you if you want to go to HackRF mode.</li>
<li>Hold the DFU button ( the button nearest to the antenna ) and press the reset button while still holding the DFU button wait a couple seconds then release the DFU button.</li>
</ul>
<ol type="1">
<li>cd to the firmware</li>
</ol>
<ol type="1">
<li>Flash the carnage firmware with <code>hackrf_spiflash -w portapack-carnage.bin</code></li>
</ol>
<ul>
<li>If the hackrf_spiflash program is not available you have not built it yet. follow the directions below then try reflashing with the above command.</li>
</ul>
<h3><a class="anchor" id="autotoc_md33"></a>
Building the hackrf_spiflash utility</h3>
<ol type="1">
<li>From the root of the git repository cd to hackrf/host/hackrf-tools/src</li>
<li>mkdir build</li>
<li>cd build</li>
<li>cmake ..</li>
<li>make</li>
<li>make install</li>
<li>ldconfig </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
