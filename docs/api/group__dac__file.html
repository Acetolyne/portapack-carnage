<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Portapack-Carnage: DAC</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Portapack-Carnage
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">DAC<div class="ingroups"><a class="el" href="group__STM32F0xx.html">STM32F0xx</a> &#124; <a class="el" href="group__STM32F1xx.html">STM32F1xx</a> &#124; <a class="el" href="group__STM32F2xx.html">STM32F2xx</a> &#124; <a class="el" href="group__STM32F3xx.html">STM32F3xx</a> &#124; <a class="el" href="group__STM32F4xx.html">STM32F4xx</a> &#124; <a class="el" href="group__STM32L1xx.html">STM32L1xx</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><b>libopencm3 STM32F0xx DAC</b>  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for DAC:</div>
<div class="dyncontent">
<div class="center"><img src="group__dac__file.png" border="0" usemap="#group____dac____file" alt=""/></div>
<map name="group____dac____file" id="group____dac____file">
<area shape="rect" href="group__STM32F2xx.html" title="Libraries for ST Microelectronics STM32F2xx series." alt="" coords="5,5,104,31"/>
<area shape="rect" title="libopencm3 STM32F0xx DAC" alt="" coords="152,129,203,155"/>
<area shape="rect" href="group__STM32F3xx.html" title="Libraries for ST Microelectronics STM32F3xx series." alt="" coords="5,55,104,80"/>
<area shape="rect" href="group__STM32F4xx.html" title="Libraries for ST Microelectronics STM32F4xx series." alt="" coords="5,104,104,129"/>
<area shape="rect" href="group__STM32F0xx.html" title="Libraries for ST Microelectronics STM32F0xx series." alt="" coords="5,153,104,179"/>
<area shape="rect" href="group__STM32L1xx.html" title="Libraries for ST Microelectronics STM32L1xx series." alt="" coords="6,203,103,228"/>
<area shape="rect" href="group__STM32F1xx.html" title="Libraries for ST Microelectronics STM32F1xx series." alt="" coords="5,252,104,277"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga0702746ecb6d016a15f759948f39ef69"><td class="memItemLeft" align="right" valign="top"><a id="ga0702746ecb6d016a15f759948f39ef69"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MASK8</b>&#160;&#160;&#160;0xFF</td></tr>
<tr class="separator:ga0702746ecb6d016a15f759948f39ef69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaadc521eaef05336daa84e25cfaa8b793"><td class="memItemLeft" align="right" valign="top"><a id="gaadc521eaef05336daa84e25cfaa8b793"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MASK12</b>&#160;&#160;&#160;0xFFF</td></tr>
<tr class="separator:gaadc521eaef05336daa84e25cfaa8b793"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3e387aca27bf8f1e229c4e4fe7509ac0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dac__file_ga3e387aca27bf8f1e229c4e4fe7509ac0.html#ga3e387aca27bf8f1e229c4e4fe7509ac0">dac_enable</a> (<a class="el" href="group__dac__defines_gaddb2a9646f5222113db5545109cc700b.html#gaddb2a9646f5222113db5545109cc700b">data_channel</a> dac_channel)</td></tr>
<tr class="memdesc:ga3e387aca27bf8f1e229c4e4fe7509ac0"><td class="mdescLeft">&#160;</td><td class="mdescRight">DAC Channel Enable.  <a href="group__dac__file_ga3e387aca27bf8f1e229c4e4fe7509ac0.html#ga3e387aca27bf8f1e229c4e4fe7509ac0">More...</a><br /></td></tr>
<tr class="separator:ga3e387aca27bf8f1e229c4e4fe7509ac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga22d83a8b387dffeed4a134ee25d0fa8b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dac__file_ga22d83a8b387dffeed4a134ee25d0fa8b.html#ga22d83a8b387dffeed4a134ee25d0fa8b">dac_disable</a> (<a class="el" href="group__dac__defines_gaddb2a9646f5222113db5545109cc700b.html#gaddb2a9646f5222113db5545109cc700b">data_channel</a> dac_channel)</td></tr>
<tr class="memdesc:ga22d83a8b387dffeed4a134ee25d0fa8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">DAC Channel Disable.  <a href="group__dac__file_ga22d83a8b387dffeed4a134ee25d0fa8b.html#ga22d83a8b387dffeed4a134ee25d0fa8b">More...</a><br /></td></tr>
<tr class="separator:ga22d83a8b387dffeed4a134ee25d0fa8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae474e0c35329b87c281c933afe656228"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dac__file_gae474e0c35329b87c281c933afe656228.html#gae474e0c35329b87c281c933afe656228">dac_buffer_enable</a> (<a class="el" href="group__dac__defines_gaddb2a9646f5222113db5545109cc700b.html#gaddb2a9646f5222113db5545109cc700b">data_channel</a> dac_channel)</td></tr>
<tr class="memdesc:gae474e0c35329b87c281c933afe656228"><td class="mdescLeft">&#160;</td><td class="mdescRight">DAC Channel Output Buffer Enable.  <a href="group__dac__file_gae474e0c35329b87c281c933afe656228.html#gae474e0c35329b87c281c933afe656228">More...</a><br /></td></tr>
<tr class="separator:gae474e0c35329b87c281c933afe656228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9fb96b4d44b951974e57c093faed0611"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dac__file_ga9fb96b4d44b951974e57c093faed0611.html#ga9fb96b4d44b951974e57c093faed0611">dac_buffer_disable</a> (<a class="el" href="group__dac__defines_gaddb2a9646f5222113db5545109cc700b.html#gaddb2a9646f5222113db5545109cc700b">data_channel</a> dac_channel)</td></tr>
<tr class="memdesc:ga9fb96b4d44b951974e57c093faed0611"><td class="mdescLeft">&#160;</td><td class="mdescRight">DAC Channel Output Buffer Disable.  <a href="group__dac__file_ga9fb96b4d44b951974e57c093faed0611.html#ga9fb96b4d44b951974e57c093faed0611">More...</a><br /></td></tr>
<tr class="separator:ga9fb96b4d44b951974e57c093faed0611"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaabd4d4599b46e7b05168cdd368aa0435"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dac__file_gaabd4d4599b46e7b05168cdd368aa0435.html#gaabd4d4599b46e7b05168cdd368aa0435">dac_dma_enable</a> (<a class="el" href="group__dac__defines_gaddb2a9646f5222113db5545109cc700b.html#gaddb2a9646f5222113db5545109cc700b">data_channel</a> dac_channel)</td></tr>
<tr class="memdesc:gaabd4d4599b46e7b05168cdd368aa0435"><td class="mdescLeft">&#160;</td><td class="mdescRight">DAC Channel DMA Enable.  <a href="group__dac__file_gaabd4d4599b46e7b05168cdd368aa0435.html#gaabd4d4599b46e7b05168cdd368aa0435">More...</a><br /></td></tr>
<tr class="separator:gaabd4d4599b46e7b05168cdd368aa0435"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga71c7a4aaded827d86bc9247d580683c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dac__file_ga71c7a4aaded827d86bc9247d580683c9.html#ga71c7a4aaded827d86bc9247d580683c9">dac_dma_disable</a> (<a class="el" href="group__dac__defines_gaddb2a9646f5222113db5545109cc700b.html#gaddb2a9646f5222113db5545109cc700b">data_channel</a> dac_channel)</td></tr>
<tr class="memdesc:ga71c7a4aaded827d86bc9247d580683c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">DAC Channel DMA Disable.  <a href="group__dac__file_ga71c7a4aaded827d86bc9247d580683c9.html#ga71c7a4aaded827d86bc9247d580683c9">More...</a><br /></td></tr>
<tr class="separator:ga71c7a4aaded827d86bc9247d580683c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8e052062c3c3856f577f1d3d2f5e8755"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dac__file_ga8e052062c3c3856f577f1d3d2f5e8755.html#ga8e052062c3c3856f577f1d3d2f5e8755">dac_trigger_enable</a> (<a class="el" href="group__dac__defines_gaddb2a9646f5222113db5545109cc700b.html#gaddb2a9646f5222113db5545109cc700b">data_channel</a> dac_channel)</td></tr>
<tr class="memdesc:ga8e052062c3c3856f577f1d3d2f5e8755"><td class="mdescLeft">&#160;</td><td class="mdescRight">DAC Channel Trigger Enable.  <a href="group__dac__file_ga8e052062c3c3856f577f1d3d2f5e8755.html#ga8e052062c3c3856f577f1d3d2f5e8755">More...</a><br /></td></tr>
<tr class="separator:ga8e052062c3c3856f577f1d3d2f5e8755"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4a436c23b95428e06f05e28554066ce1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dac__file_ga4a436c23b95428e06f05e28554066ce1.html#ga4a436c23b95428e06f05e28554066ce1">dac_trigger_disable</a> (<a class="el" href="group__dac__defines_gaddb2a9646f5222113db5545109cc700b.html#gaddb2a9646f5222113db5545109cc700b">data_channel</a> dac_channel)</td></tr>
<tr class="memdesc:ga4a436c23b95428e06f05e28554066ce1"><td class="mdescLeft">&#160;</td><td class="mdescRight">DAC Channel Trigger Disable.  <a href="group__dac__file_ga4a436c23b95428e06f05e28554066ce1.html#ga4a436c23b95428e06f05e28554066ce1">More...</a><br /></td></tr>
<tr class="separator:ga4a436c23b95428e06f05e28554066ce1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6ab076c50ee6f788648a9a6ebe161ab2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dac__file_ga6ab076c50ee6f788648a9a6ebe161ab2.html#ga6ab076c50ee6f788648a9a6ebe161ab2">dac_set_trigger_source</a> (uint32_t dac_trig_src)</td></tr>
<tr class="memdesc:ga6ab076c50ee6f788648a9a6ebe161ab2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set DAC Channel Trigger Source.  <a href="group__dac__file_ga6ab076c50ee6f788648a9a6ebe161ab2.html#ga6ab076c50ee6f788648a9a6ebe161ab2">More...</a><br /></td></tr>
<tr class="separator:ga6ab076c50ee6f788648a9a6ebe161ab2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa0a78f45943398ea085e7332611e95f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dac__file_gaa0a78f45943398ea085e7332611e95f9.html#gaa0a78f45943398ea085e7332611e95f9">dac_set_waveform_generation</a> (uint32_t dac_wave_ens)</td></tr>
<tr class="memdesc:gaa0a78f45943398ea085e7332611e95f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable and Set DAC Channel Waveform Generation.  <a href="group__dac__file_gaa0a78f45943398ea085e7332611e95f9.html#gaa0a78f45943398ea085e7332611e95f9">More...</a><br /></td></tr>
<tr class="separator:gaa0a78f45943398ea085e7332611e95f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa8c1fd9173d922191b2164ca35ec1a81"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dac__file_gaa8c1fd9173d922191b2164ca35ec1a81.html#gaa8c1fd9173d922191b2164ca35ec1a81">dac_disable_waveform_generation</a> (<a class="el" href="group__dac__defines_gaddb2a9646f5222113db5545109cc700b.html#gaddb2a9646f5222113db5545109cc700b">data_channel</a> dac_channel)</td></tr>
<tr class="memdesc:gaa8c1fd9173d922191b2164ca35ec1a81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable DAC Channel Waveform Generation.  <a href="group__dac__file_gaa8c1fd9173d922191b2164ca35ec1a81.html#gaa8c1fd9173d922191b2164ca35ec1a81">More...</a><br /></td></tr>
<tr class="separator:gaa8c1fd9173d922191b2164ca35ec1a81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga89fb44b8fd880a1c0415e77f2762c6af"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dac__file_ga89fb44b8fd880a1c0415e77f2762c6af.html#ga89fb44b8fd880a1c0415e77f2762c6af">dac_set_waveform_characteristics</a> (uint32_t dac_mamp)</td></tr>
<tr class="memdesc:ga89fb44b8fd880a1c0415e77f2762c6af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set DAC Channel LFSR Mask or Triangle Wave Amplitude.  <a href="group__dac__file_ga89fb44b8fd880a1c0415e77f2762c6af.html#ga89fb44b8fd880a1c0415e77f2762c6af">More...</a><br /></td></tr>
<tr class="separator:ga89fb44b8fd880a1c0415e77f2762c6af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabdef300140d86666393d9d66102bc76d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dac__file_gabdef300140d86666393d9d66102bc76d.html#gabdef300140d86666393d9d66102bc76d">dac_load_data_buffer_single</a> (uint16_t dac_data, <a class="el" href="group__dac__defines_ga3f15c2d8c2dcfbc06b58b09e4c2d7b3c.html#ga3f15c2d8c2dcfbc06b58b09e4c2d7b3c">data_align</a> dac_data_format, <a class="el" href="group__dac__defines_gaddb2a9646f5222113db5545109cc700b.html#gaddb2a9646f5222113db5545109cc700b">data_channel</a> dac_channel)</td></tr>
<tr class="memdesc:gabdef300140d86666393d9d66102bc76d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load DAC Data Register.  <a href="group__dac__file_gabdef300140d86666393d9d66102bc76d.html#gabdef300140d86666393d9d66102bc76d">More...</a><br /></td></tr>
<tr class="separator:gabdef300140d86666393d9d66102bc76d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4d573e5c5ac0b0b496890f4518089c6b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dac__file_ga4d573e5c5ac0b0b496890f4518089c6b.html#ga4d573e5c5ac0b0b496890f4518089c6b">dac_load_data_buffer_dual</a> (uint16_t dac_data1, uint16_t dac_data2, <a class="el" href="group__dac__defines_ga3f15c2d8c2dcfbc06b58b09e4c2d7b3c.html#ga3f15c2d8c2dcfbc06b58b09e4c2d7b3c">data_align</a> dac_data_format)</td></tr>
<tr class="memdesc:ga4d573e5c5ac0b0b496890f4518089c6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load DAC Dual Data Register.  <a href="group__dac__file_ga4d573e5c5ac0b0b496890f4518089c6b.html#ga4d573e5c5ac0b0b496890f4518089c6b">More...</a><br /></td></tr>
<tr class="separator:ga4d573e5c5ac0b0b496890f4518089c6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga091e162072befad91b024f385c9168be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dac__file_ga091e162072befad91b024f385c9168be.html#ga091e162072befad91b024f385c9168be">dac_software_trigger</a> (<a class="el" href="group__dac__defines_gaddb2a9646f5222113db5545109cc700b.html#gaddb2a9646f5222113db5545109cc700b">data_channel</a> dac_channel)</td></tr>
<tr class="memdesc:ga091e162072befad91b024f385c9168be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger the DAC by a Software Trigger.  <a href="group__dac__file_ga091e162072befad91b024f385c9168be.html#ga091e162072befad91b024f385c9168be">More...</a><br /></td></tr>
<tr class="separator:ga091e162072befad91b024f385c9168be"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><b>libopencm3 STM32F0xx DAC</b> </p>
<p><b>libopencm3 STM32L1xx DAC</b></p>
<p><b>libopencm3 STM32F4xx DAC</b></p>
<p><b>libopencm3 STM32F3xx DAC</b></p>
<p><b>libopencm3 STM32F2xx DAC</b></p>
<p><b>libopencm3 STM32F1xx DAC</b></p>
<dl class="section version"><dt>Version</dt><dd>1.0.0</dd></dl>
<dl class="section date"><dt>Date</dt><dd>11 July 2013</dd></dl>
<p>LGPL License Terms <a class="el" href="lgpl_license.html">libopencm3 License</a></p>
<dl class="section version"><dt>Version</dt><dd>1.0.0</dd></dl>
<dl class="section date"><dt>Date</dt><dd>18 August 2012</dd></dl>
<p>LGPL License Terms <a class="el" href="lgpl_license.html">libopencm3 License</a></p>
<dl class="section author"><dt>Author</dt><dd> &copy;  2012 Ken Sarkies <a href="#" onclick="location.href='mai'+'lto:'+'ksa'+'rk'+'ies'+'@i'+'nte'+'rn'+'ode'+'.o'+'n.n'+'et'; return false;">ksark<span style="display: none;">.nosp@m.</span>ies@<span style="display: none;">.nosp@m.</span>inter<span style="display: none;">.nosp@m.</span>node<span style="display: none;">.nosp@m.</span>.on.n<span style="display: none;">.nosp@m.</span>et</a></dd></dl>
<p>This library supports the Digital to Analog Conversion System in the STM32F series of ARM Cortex Microcontrollers by ST Microelectronics.</p>
<p>The DAC is present only in a limited set of devices, notably some of the connection line, high density and XL devices.</p>
<p>Two DAC channels are available, however unlike the ADC channels these are separate DAC devices controlled by the same register block.</p>
<p>The DAC is on APB1. Its clock must be enabled in RCC and the <a class="el" href="structGPIO.html">GPIO</a> ports set to alternate function output before it can be used. The digital output driver is disabled so the output driver mode (push-pull/open drain) is arbitrary.</p>
<p>The DAC has a holding (buffer) register and an output register from which the analog output is derived. The holding register must be loaded first. If triggering is enabled the output register is loaded from the holding register after a trigger occurs. If triggering is not enabled the holding register contents are transferred directly to the output register.</p>
<dl class="section note"><dt>Note</dt><dd>To avoid nonlinearities, do not allow outputs to range close to zero or V_analog.</dd></dl>
<h1><a class="anchor" id="dac_api_dual"></a>
Dual Channel Conversion</h1>
<p>There are dual modes in which both DACs are used to output data simultaneously or independently on both channels. The data must be presented according to the formats described in the datasheets. A convenience function <a class="el" href="group__dac__file_ga4d573e5c5ac0b0b496890f4518089c6b.html#ga4d573e5c5ac0b0b496890f4518089c6b">dac_load_data_buffer_dual</a> is provided for software controlled use.</p>
<p>A variety of modes are available depending on whether independent or simultaneous output is desired, and whether waveforms are to be superimposed. Refer to the datasheets.</p>
<p>If DMA is used, only enable it for one of the channels. The DMA requests will then serve data in dual format to the data register dedicated to dual mode. The data will then be split and loaded to the appropriate DAC following the next trigger. There are three registers available, one for each of the formats: 12 bit right-aligned, 12 bit left-aligned and 8 bit right-aligned. The desired format is determined by specifying the appropriate register to the DMA controller.</p>
<h1><a class="anchor" id="dac_api_basic_ex"></a>
Basic DAC handling API.</h1>
<p>Set the DAC's <a class="el" href="structGPIO.html">GPIO</a> port to any alternate function output mode. Enable the DAC clock. Enable the DAC, set a trigger source and load the buffer with the first value. After the DAC is triggered, load the buffer with the next value. This example uses software triggering and added noise. The trigger and further buffer load calls are made when data is to be sent out.</p>
<div class="fragment"><div class="line"><a class="code" href="group__gpio__defines_ga5273739c01f6cbc3c400ae81d4330294.html#ga5273739c01f6cbc3c400ae81d4330294">gpio_set_mode</a>(GPIOA, GPIO_MODE_OUTPUT_50_MHZ,</div>
<div class="line">          <a class="code" href="group__gpio__cnf_gafdb5d21e4c813c645906c8b7e9472daf.html#gafdb5d21e4c813c645906c8b7e9472daf">GPIO_CNF_OUTPUT_ALTFN_PUSHPULL</a>, GPIO4);</div>
<div class="line"><a class="code" href="group__STM32F1xx__rcc__defines_gaaf3dd53c1ced02082fce0076976547a8.html#gaaf3dd53c1ced02082fce0076976547a8">rcc_peripheral_enable_clock</a>(&amp;RCC_APB1ENR, <a class="code" href="group__Peripheral__Registers__Bits__Definition_ga087968e2786321fb8645c46b22eea132.html#ga087968e2786321fb8645c46b22eea132">RCC_APB1ENR_DACEN</a>);</div>
<div class="line"><a class="code" href="group__dac__defines_ga22d83a8b387dffeed4a134ee25d0fa8b.html#ga22d83a8b387dffeed4a134ee25d0fa8b">dac_disable</a>(CHANNEL_1);</div>
<div class="line"><a class="code" href="group__dac__defines_ga89fb44b8fd880a1c0415e77f2762c6af.html#ga89fb44b8fd880a1c0415e77f2762c6af">dac_set_waveform_characteristics</a>(DAC_CR_MAMP1_8);</div>
<div class="line"><a class="code" href="group__dac__defines_gaa0a78f45943398ea085e7332611e95f9.html#gaa0a78f45943398ea085e7332611e95f9">dac_set_waveform_generation</a>(DAC_CR_WAVE1_NOISE);</div>
<div class="line"><a class="code" href="group__dac__defines_ga5c8dc7708ee76ac6e3487e4489f40d8e.html#ga5c8dc7708ee76ac6e3487e4489f40d8e">dac_enable</a>(CHANNEL_1);</div>
<div class="line"><a class="code" href="group__dac__defines_ga6ab076c50ee6f788648a9a6ebe161ab2.html#ga6ab076c50ee6f788648a9a6ebe161ab2">dac_set_trigger_source</a>(DAC_CR_TSEL1_SW);</div>
<div class="line"><a class="code" href="group__dac__defines_gabdef300140d86666393d9d66102bc76d.html#gabdef300140d86666393d9d66102bc76d">dac_load_data_buffer_single</a>(0, RIGHT12, CHANNEL_1);</div>
<div class="line">....</div>
<div class="line"><a class="code" href="group__dac__defines_ga091e162072befad91b024f385c9168be.html#ga091e162072befad91b024f385c9168be">dac_software_trigger</a>(CHANNEL_1);</div>
<div class="line"><a class="code" href="group__dac__defines_gabdef300140d86666393d9d66102bc76d.html#gabdef300140d86666393d9d66102bc76d">dac_load_data_buffer_single</a>(value, RIGHT12, CHANNEL_1);</div>
</div><!-- fragment --><h1><a class="anchor" id="dac_api_dma_ex"></a>
Simultaneous Dual DAC with DMA.</h1>
<p>This example in part sets up the DAC channel 1 DMA (DMA2 channel 3) to read 16 bit data from memory into the right-aligned 8 bit dual register DAC_DHR8RD. Both DAC channels are enabled, and both triggers are set to the same timer 2 input as required for simultaneous operation. DMA is enabled for DAC channel 1 only to ensure that only one DMA request is generated.</p>
<div class="fragment"><div class="line"><a class="code" href="group__dma__defines_ga6e89625484c29b630c797340e4d71d09.html#ga6e89625484c29b630c797340e4d71d09">dma_set_memory_size</a>(DMA2,DMA_CHANNEL3,DMA_CCR_MSIZE_16BIT);</div>
<div class="line"><a class="code" href="group__dma__defines_ga5613aadc5520edf0ea058a0a2c41764c.html#ga5613aadc5520edf0ea058a0a2c41764c">dma_set_peripheral_size</a>(DMA2,DMA_CHANNEL3,DMA_CCR_PSIZE_16BIT);</div>
<div class="line"><a class="code" href="group__dma__defines_ga1446d08000d09fe53ccc60f51baee51a.html#ga1446d08000d09fe53ccc60f51baee51a">dma_set_read_from_memory</a>(DMA2,DMA_CHANNEL3);</div>
<div class="line"><a class="code" href="group__dma__defines_ga795dbd3370cf28a72ee3e2b7582df0cd.html#ga795dbd3370cf28a72ee3e2b7582df0cd">dma_set_peripheral_address</a>(DMA2,DMA_CHANNEL3,(uint32_t) &amp;DAC_DHR8RD);</div>
<div class="line"><a class="code" href="group__dma__defines_ga8ceb0c8c8ce56a288bca8180d426c178.html#ga8ceb0c8c8ce56a288bca8180d426c178">dma_enable_channel</a>(DMA2,DMA_CHANNEL3);</div>
<div class="line">...</div>
<div class="line">dac_trigger_enable(CHANNEL_D);</div>
<div class="line"><a class="code" href="group__dac__defines_ga6ab076c50ee6f788648a9a6ebe161ab2.html#ga6ab076c50ee6f788648a9a6ebe161ab2">dac_set_trigger_source</a>(DAC_CR_TSEL1_T2 | DAC_CR_TSEL2_T2);</div>
<div class="line"><a class="code" href="group__dac__defines_gaabd4d4599b46e7b05168cdd368aa0435.html#gaabd4d4599b46e7b05168cdd368aa0435">dac_dma_enable</a>(CHANNEL_1);</div>
<div class="line"><a class="code" href="group__dac__defines_ga5c8dc7708ee76ac6e3487e4489f40d8e.html#ga5c8dc7708ee76ac6e3487e4489f40d8e">dac_enable</a>(CHANNEL_D);</div>
</div><!-- fragment --><p>LGPL License Terms <a class="el" href="lgpl_license.html">libopencm3 License</a> </p>
</div><!-- contents -->
<div class="ttc" id="agroup__dac__defines_gabdef300140d86666393d9d66102bc76d_html_gabdef300140d86666393d9d66102bc76d"><div class="ttname"><a href="group__dac__defines_gabdef300140d86666393d9d66102bc76d.html#gabdef300140d86666393d9d66102bc76d">dac_load_data_buffer_single</a></div><div class="ttdeci">void dac_load_data_buffer_single(uint16_t dac_data, data_align dac_data_format, data_channel dac_channel)</div><div class="ttdoc">Load DAC Data Register.</div><div class="ttdef"><b>Definition:</b> dac_common_all.c:414</div></div>
<div class="ttc" id="agroup__dac__defines_ga22d83a8b387dffeed4a134ee25d0fa8b_html_ga22d83a8b387dffeed4a134ee25d0fa8b"><div class="ttname"><a href="group__dac__defines_ga22d83a8b387dffeed4a134ee25d0fa8b.html#ga22d83a8b387dffeed4a134ee25d0fa8b">dac_disable</a></div><div class="ttdeci">void dac_disable(data_channel dac_channel)</div><div class="ttdoc">DAC Channel Disable.</div><div class="ttdef"><b>Definition:</b> dac_common_all.c:156</div></div>
<div class="ttc" id="agroup__gpio__cnf_gafdb5d21e4c813c645906c8b7e9472daf_html_gafdb5d21e4c813c645906c8b7e9472daf"><div class="ttname"><a href="group__gpio__cnf_gafdb5d21e4c813c645906c8b7e9472daf.html#gafdb5d21e4c813c645906c8b7e9472daf">GPIO_CNF_OUTPUT_ALTFN_PUSHPULL</a></div><div class="ttdeci">#define GPIO_CNF_OUTPUT_ALTFN_PUSHPULL</div><div class="ttdef"><b>Definition:</b> gpio.h:624</div></div>
<div class="ttc" id="agroup__dac__defines_ga89fb44b8fd880a1c0415e77f2762c6af_html_ga89fb44b8fd880a1c0415e77f2762c6af"><div class="ttname"><a href="group__dac__defines_ga89fb44b8fd880a1c0415e77f2762c6af.html#ga89fb44b8fd880a1c0415e77f2762c6af">dac_set_waveform_characteristics</a></div><div class="ttdeci">void dac_set_waveform_characteristics(uint32_t dac_mamp)</div><div class="ttdoc">Set DAC Channel LFSR Mask or Triangle Wave Amplitude.</div><div class="ttdef"><b>Definition:</b> dac_common_all.c:395</div></div>
<div class="ttc" id="agroup__gpio__defines_ga5273739c01f6cbc3c400ae81d4330294_html_ga5273739c01f6cbc3c400ae81d4330294"><div class="ttname"><a href="group__gpio__defines_ga5273739c01f6cbc3c400ae81d4330294.html#ga5273739c01f6cbc3c400ae81d4330294">gpio_set_mode</a></div><div class="ttdeci">BEGIN_DECLS void gpio_set_mode(uint32_t gpioport, uint8_t mode, uint8_t cnf, uint16_t gpios)</div><div class="ttdoc">Set GPIO Pin Mode.</div><div class="ttdef"><b>Definition:</b> gpio.c:95</div></div>
<div class="ttc" id="agroup__STM32F1xx__rcc__defines_gaaf3dd53c1ced02082fce0076976547a8_html_gaaf3dd53c1ced02082fce0076976547a8"><div class="ttname"><a href="group__STM32F1xx__rcc__defines_gaaf3dd53c1ced02082fce0076976547a8.html#gaaf3dd53c1ced02082fce0076976547a8">rcc_peripheral_enable_clock</a></div><div class="ttdeci">void rcc_peripheral_enable_clock(volatile uint32_t *reg, uint32_t en)</div><div class="ttdoc">RCC Enable Peripheral Clocks.</div><div class="ttdef"><b>Definition:</b> rcc.c:438</div></div>
<div class="ttc" id="agroup__dma__defines_ga1446d08000d09fe53ccc60f51baee51a_html_ga1446d08000d09fe53ccc60f51baee51a"><div class="ttname"><a href="group__dma__defines_ga1446d08000d09fe53ccc60f51baee51a.html#ga1446d08000d09fe53ccc60f51baee51a">dma_set_read_from_memory</a></div><div class="ttdeci">void dma_set_read_from_memory(uint32_t dma, uint8_t channel)</div><div class="ttdoc">DMA Channel Enable Transfers from Memory.</div><div class="ttdef"><b>Definition:</b> dma_common_l1f013.c:275</div></div>
<div class="ttc" id="agroup__dac__defines_ga091e162072befad91b024f385c9168be_html_ga091e162072befad91b024f385c9168be"><div class="ttname"><a href="group__dac__defines_ga091e162072befad91b024f385c9168be.html#ga091e162072befad91b024f385c9168be">dac_software_trigger</a></div><div class="ttdeci">void dac_software_trigger(data_channel dac_channel)</div><div class="ttdoc">Trigger the DAC by a Software Trigger.</div><div class="ttdef"><b>Definition:</b> dac_common_all.c:485</div></div>
<div class="ttc" id="agroup__dma__defines_ga795dbd3370cf28a72ee3e2b7582df0cd_html_ga795dbd3370cf28a72ee3e2b7582df0cd"><div class="ttname"><a href="group__dma__defines_ga795dbd3370cf28a72ee3e2b7582df0cd.html#ga795dbd3370cf28a72ee3e2b7582df0cd">dma_set_peripheral_address</a></div><div class="ttdeci">void dma_set_peripheral_address(uint32_t dma, uint8_t stream, uint32_t address)</div><div class="ttdoc">DMA Channel Set the Peripheral Address.</div><div class="ttdef"><b>Definition:</b> dma_common_l1f013.c:393</div></div>
<div class="ttc" id="agroup__Peripheral__Registers__Bits__Definition_ga087968e2786321fb8645c46b22eea132_html_ga087968e2786321fb8645c46b22eea132"><div class="ttname"><a href="group__Peripheral__Registers__Bits__Definition_ga087968e2786321fb8645c46b22eea132.html#ga087968e2786321fb8645c46b22eea132">RCC_APB1ENR_DACEN</a></div><div class="ttdeci">#define RCC_APB1ENR_DACEN</div><div class="ttdef"><b>Definition:</b> stm32f0xx.h:2160</div></div>
<div class="ttc" id="agroup__dac__defines_ga5c8dc7708ee76ac6e3487e4489f40d8e_html_ga5c8dc7708ee76ac6e3487e4489f40d8e"><div class="ttname"><a href="group__dac__defines_ga5c8dc7708ee76ac6e3487e4489f40d8e.html#ga5c8dc7708ee76ac6e3487e4489f40d8e">dac_enable</a></div><div class="ttdeci">BEGIN_DECLS void dac_enable(data_channel dac_channel)</div><div class="ttdoc">DAC Channel Enable.</div><div class="ttdef"><b>Definition:</b> dac_common_all.c:133</div></div>
<div class="ttc" id="agroup__dma__defines_ga5613aadc5520edf0ea058a0a2c41764c_html_ga5613aadc5520edf0ea058a0a2c41764c"><div class="ttname"><a href="group__dma__defines_ga5613aadc5520edf0ea058a0a2c41764c.html#ga5613aadc5520edf0ea058a0a2c41764c">dma_set_peripheral_size</a></div><div class="ttdeci">void dma_set_peripheral_size(uint32_t dma, uint8_t stream, uint32_t peripheral_size)</div><div class="ttdoc">DMA Channel Set Peripheral Word Width.</div><div class="ttdef"><b>Definition:</b> dma_common_l1f013.c:169</div></div>
<div class="ttc" id="agroup__dac__defines_gaabd4d4599b46e7b05168cdd368aa0435_html_gaabd4d4599b46e7b05168cdd368aa0435"><div class="ttname"><a href="group__dac__defines_gaabd4d4599b46e7b05168cdd368aa0435.html#gaabd4d4599b46e7b05168cdd368aa0435">dac_dma_enable</a></div><div class="ttdeci">void dac_dma_enable(data_channel dac_channel)</div><div class="ttdoc">DAC Channel DMA Enable.</div><div class="ttdef"><b>Definition:</b> dac_common_all.c:230</div></div>
<div class="ttc" id="agroup__dma__defines_ga8ceb0c8c8ce56a288bca8180d426c178_html_ga8ceb0c8c8ce56a288bca8180d426c178"><div class="ttname"><a href="group__dma__defines_ga8ceb0c8c8ce56a288bca8180d426c178.html#ga8ceb0c8c8ce56a288bca8180d426c178">dma_enable_channel</a></div><div class="ttdeci">void dma_enable_channel(uint32_t dma, uint8_t channel)</div><div class="ttdoc">DMA Channel Enable.</div><div class="ttdef"><b>Definition:</b> dma_common_l1f013.c:359</div></div>
<div class="ttc" id="agroup__dac__defines_gaa0a78f45943398ea085e7332611e95f9_html_gaa0a78f45943398ea085e7332611e95f9"><div class="ttname"><a href="group__dac__defines_gaa0a78f45943398ea085e7332611e95f9.html#gaa0a78f45943398ea085e7332611e95f9">dac_set_waveform_generation</a></div><div class="ttdeci">void dac_set_waveform_generation(uint32_t dac_wave_ens)</div><div class="ttdoc">Enable and Set DAC Channel Waveform Generation.</div><div class="ttdef"><b>Definition:</b> dac_common_all.c:347</div></div>
<div class="ttc" id="agroup__dma__defines_ga6e89625484c29b630c797340e4d71d09_html_ga6e89625484c29b630c797340e4d71d09"><div class="ttname"><a href="group__dma__defines_ga6e89625484c29b630c797340e4d71d09.html#ga6e89625484c29b630c797340e4d71d09">dma_set_memory_size</a></div><div class="ttdeci">void dma_set_memory_size(uint32_t dma, uint8_t stream, uint32_t mem_size)</div><div class="ttdoc">DMA Channel Set Memory Word Width.</div><div class="ttdef"><b>Definition:</b> dma_common_l1f013.c:149</div></div>
<div class="ttc" id="agroup__dac__defines_ga6ab076c50ee6f788648a9a6ebe161ab2_html_ga6ab076c50ee6f788648a9a6ebe161ab2"><div class="ttname"><a href="group__dac__defines_ga6ab076c50ee6f788648a9a6ebe161ab2.html#ga6ab076c50ee6f788648a9a6ebe161ab2">dac_set_trigger_source</a></div><div class="ttdeci">void dac_set_trigger_source(uint32_t dac_trig_src)</div><div class="ttdoc">Set DAC Channel Trigger Source.</div><div class="ttdef"><b>Definition:</b> dac_common_all.c:328</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
