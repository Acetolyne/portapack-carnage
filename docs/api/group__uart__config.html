<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Portapack-Carnage: UART configuration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Portapack-Carnage
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">UART configuration<div class="ingroups"><a class="el" href="group__LM4Fxx.html">LM4F</a> &raquo; <a class="el" href="group__uart__file.html">UART</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><b>Enabling and configuring the <a class="el" href="structUART.html">UART</a></b>  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for UART configuration:</div>
<div class="dyncontent">
<div class="center"><img src="group__uart__config.png" border="0" usemap="#group____uart____config" alt=""/></div>
<map name="group____uart____config" id="group____uart____config">
<area shape="rect" href="group__uart__file.html" title="libopencm3 LM4F Universal Asynchronous Receiver Transmitter" alt="" coords="5,5,64,31"/>
<area shape="rect" title="Enabling and configuring the UART" alt="" coords="112,5,260,31"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gacd6ffe5e9e3f555d07a3af7ee7fdf74a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uart__config_gacd6ffe5e9e3f555d07a3af7ee7fdf74a.html#gacd6ffe5e9e3f555d07a3af7ee7fdf74a">uart_enable</a> (uint32_t uart)</td></tr>
<tr class="memdesc:gacd6ffe5e9e3f555d07a3af7ee7fdf74a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable the <a class="el" href="structUART.html">UART</a>.  <a href="group__uart__config_gacd6ffe5e9e3f555d07a3af7ee7fdf74a.html#gacd6ffe5e9e3f555d07a3af7ee7fdf74a">More...</a><br /></td></tr>
<tr class="separator:gacd6ffe5e9e3f555d07a3af7ee7fdf74a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0167757699a14269e55640b5034ffcbf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uart__config_ga0167757699a14269e55640b5034ffcbf.html#ga0167757699a14269e55640b5034ffcbf">uart_disable</a> (uint32_t uart)</td></tr>
<tr class="memdesc:ga0167757699a14269e55640b5034ffcbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable the <a class="el" href="structUART.html">UART</a>.  <a href="group__uart__config_ga0167757699a14269e55640b5034ffcbf.html#ga0167757699a14269e55640b5034ffcbf">More...</a><br /></td></tr>
<tr class="separator:ga0167757699a14269e55640b5034ffcbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga05a4513fed24167dd33ebc5805b9ca77"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uart__config_ga05a4513fed24167dd33ebc5805b9ca77.html#ga05a4513fed24167dd33ebc5805b9ca77">uart_set_baudrate</a> (uint32_t uart, uint32_t baud)</td></tr>
<tr class="memdesc:ga05a4513fed24167dd33ebc5805b9ca77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set <a class="el" href="structUART.html">UART</a> baudrate.  <a href="group__uart__config_ga05a4513fed24167dd33ebc5805b9ca77.html#ga05a4513fed24167dd33ebc5805b9ca77">More...</a><br /></td></tr>
<tr class="separator:ga05a4513fed24167dd33ebc5805b9ca77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadafb5a1c4596fb687bdc99dff191d88f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uart__config_gadafb5a1c4596fb687bdc99dff191d88f.html#gadafb5a1c4596fb687bdc99dff191d88f">uart_set_databits</a> (uint32_t uart, uint8_t databits)</td></tr>
<tr class="memdesc:gadafb5a1c4596fb687bdc99dff191d88f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set <a class="el" href="structUART.html">UART</a> databits.  <a href="group__uart__config_gadafb5a1c4596fb687bdc99dff191d88f.html#gadafb5a1c4596fb687bdc99dff191d88f">More...</a><br /></td></tr>
<tr class="separator:gadafb5a1c4596fb687bdc99dff191d88f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf3ddb4b6b173fb6cd30139ac67ca62cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uart__config_gaf3ddb4b6b173fb6cd30139ac67ca62cb.html#gaf3ddb4b6b173fb6cd30139ac67ca62cb">uart_set_stopbits</a> (uint32_t uart, uint8_t stopbits)</td></tr>
<tr class="memdesc:gaf3ddb4b6b173fb6cd30139ac67ca62cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set <a class="el" href="structUART.html">UART</a> stopbits.  <a href="group__uart__config_gaf3ddb4b6b173fb6cd30139ac67ca62cb.html#gaf3ddb4b6b173fb6cd30139ac67ca62cb">More...</a><br /></td></tr>
<tr class="separator:gaf3ddb4b6b173fb6cd30139ac67ca62cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7b0acac78989b94dab26d92d1b640e05"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uart__config_ga7b0acac78989b94dab26d92d1b640e05.html#ga7b0acac78989b94dab26d92d1b640e05">uart_set_parity</a> (uint32_t uart, enum uart_parity parity)</td></tr>
<tr class="memdesc:ga7b0acac78989b94dab26d92d1b640e05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set <a class="el" href="structUART.html">UART</a> parity.  <a href="group__uart__config_ga7b0acac78989b94dab26d92d1b640e05.html#ga7b0acac78989b94dab26d92d1b640e05">More...</a><br /></td></tr>
<tr class="separator:ga7b0acac78989b94dab26d92d1b640e05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabc37af12e01b5827d40f5ed7d149076f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uart__config_gabc37af12e01b5827d40f5ed7d149076f.html#gabc37af12e01b5827d40f5ed7d149076f">uart_set_flow_control</a> (uint32_t uart, enum uart_flowctl flow)</td></tr>
<tr class="memdesc:gabc37af12e01b5827d40f5ed7d149076f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the flow control scheme.  <a href="group__uart__config_gabc37af12e01b5827d40f5ed7d149076f.html#gabc37af12e01b5827d40f5ed7d149076f">More...</a><br /></td></tr>
<tr class="separator:gabc37af12e01b5827d40f5ed7d149076f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab9d2f5223bc6f08621e9b6d38f8a4fb9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uart__config_gab9d2f5223bc6f08621e9b6d38f8a4fb9.html#gab9d2f5223bc6f08621e9b6d38f8a4fb9">uart_clock_from_piosc</a> (uint32_t uart)</td></tr>
<tr class="memdesc:gab9d2f5223bc6f08621e9b6d38f8a4fb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clock the <a class="el" href="structUART.html">UART</a> module from the internal oscillator.  <a href="group__uart__config_gab9d2f5223bc6f08621e9b6d38f8a4fb9.html#gab9d2f5223bc6f08621e9b6d38f8a4fb9">More...</a><br /></td></tr>
<tr class="separator:gab9d2f5223bc6f08621e9b6d38f8a4fb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga917d75f562fe93eea7c684756f9f02c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uart__config_ga917d75f562fe93eea7c684756f9f02c1.html#ga917d75f562fe93eea7c684756f9f02c1">uart_clock_from_sysclk</a> (uint32_t uart)</td></tr>
<tr class="memdesc:ga917d75f562fe93eea7c684756f9f02c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clock the <a class="el" href="structUART.html">UART</a> module from the system clock.  <a href="group__uart__config_ga917d75f562fe93eea7c684756f9f02c1.html#ga917d75f562fe93eea7c684756f9f02c1">More...</a><br /></td></tr>
<tr class="separator:ga917d75f562fe93eea7c684756f9f02c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><b>Enabling and configuring the <a class="el" href="structUART.html">UART</a></b> </p>
<p>Enabling the <a class="el" href="structUART.html">UART</a> is a two step process. The <a class="el" href="structGPIO.html">GPIO</a> on which the <a class="el" href="structUART.html">UART</a> resides must be enabled, and the <a class="el" href="structUART.html">UART</a> pins must be configured as alternate function, digital pins. Pins must also be muxed to the appropriate alternate function. This is done with the <a class="el" href="structGPIO.html">GPIO</a> API.</p>
<p>The second step involves enabling and the <a class="el" href="structUART.html">UART</a> itself. The <a class="el" href="structUART.html">UART</a> should be disabled while it is being configured.</p><ol type="1">
<li>The <a class="el" href="structUART.html">UART</a> clock must be enabled with <a class="el" href="group__systemcontrol__defines_ga395012136af8db0d9fc18dad206b8a87.html#ga395012136af8db0d9fc18dad206b8a87">periph_clock_enable()</a>.</li>
<li>The <a class="el" href="structUART.html">UART</a> must be disabled with <a class="el" href="group__uart__defines_ga0167757699a14269e55640b5034ffcbf.html#ga0167757699a14269e55640b5034ffcbf">uart_disable()</a>.</li>
<li>The <a class="el" href="structUART.html">UART</a> clock source should be chosen before setting the baudrate.</li>
<li>Baudrate, data bits, stop bit length, and parity can be configured.</li>
<li>If needed, enable CTS or RTS lines via the <a class="el" href="group__uart__defines_gabc37af12e01b5827d40f5ed7d149076f.html#gabc37af12e01b5827d40f5ed7d149076f">uart_set_flow_control()</a>.</li>
<li>The <a class="el" href="structUART.html">UART</a> can now be enabled with <a class="el" href="group__uart__defines_gacd6ffe5e9e3f555d07a3af7ee7fdf74a.html#gacd6ffe5e9e3f555d07a3af7ee7fdf74a">uart_enable()</a>.</li>
</ol>
<p>For example, to enable UART1 at 115200 8n1 with hardware flow control: </p><div class="fragment"><div class="line"><span class="comment">// Enable the UART clock</span></div>
<div class="line"><a class="code" href="group__systemcontrol__defines_ga395012136af8db0d9fc18dad206b8a87.html#ga395012136af8db0d9fc18dad206b8a87">periph_clock_enable</a>(RCC_UART1);</div>
<div class="line"><span class="comment">// We need a brief delay before we can access UART config registers</span></div>
<div class="line">__asm__(<span class="stringliteral">&quot;nop&quot;</span>); __asm__(<span class="stringliteral">&quot;nop&quot;</span>); __asm__(<span class="stringliteral">&quot;nop&quot;</span>);</div>
<div class="line"><span class="comment">// Disable the UART while we mess with its settings</span></div>
<div class="line"><a class="code" href="group__uart__defines_ga0167757699a14269e55640b5034ffcbf.html#ga0167757699a14269e55640b5034ffcbf">uart_disable</a>(UART1);</div>
<div class="line"><span class="comment">// Configure the UART clock source as precision internal oscillator</span></div>
<div class="line"><a class="code" href="group__uart__defines_gab9d2f5223bc6f08621e9b6d38f8a4fb9.html#gab9d2f5223bc6f08621e9b6d38f8a4fb9">uart_clock_from_piosc</a>();</div>
<div class="line"><span class="comment">// Set communication parameters</span></div>
<div class="line"><a class="code" href="group__uart__defines_ga5e530a66e67a91f2cb782b9abce0d896.html#ga5e530a66e67a91f2cb782b9abce0d896">uart_set_baudrate</a>(UART1, 115200);</div>
<div class="line"><a class="code" href="group__uart__defines_gadafb5a1c4596fb687bdc99dff191d88f.html#gadafb5a1c4596fb687bdc99dff191d88f">uart_set_databits</a>(UART1, 8);</div>
<div class="line"><a class="code" href="group__uart__defines_ga7b0acac78989b94dab26d92d1b640e05.html#ga7b0acac78989b94dab26d92d1b640e05">uart_set_parity</a>(UART1, UART_PARITY_NONE);</div>
<div class="line"><a class="code" href="group__uart__defines_gaf3ddb4b6b173fb6cd30139ac67ca62cb.html#gaf3ddb4b6b173fb6cd30139ac67ca62cb">uart_set_stopbits</a>(UART1, 1);</div>
<div class="line"><span class="comment">// Enable RTC and CTS lines</span></div>
<div class="line"><a class="code" href="group__uart__defines_gabc37af12e01b5827d40f5ed7d149076f.html#gabc37af12e01b5827d40f5ed7d149076f">uart_set_flow_control</a>(UART1, UART_FLOWCTL_HARD_RTS_CTS);</div>
<div class="line"><span class="comment">// Now that we&#39;re done messing with the settings, enable the UART</span></div>
<div class="line"><a class="code" href="group__uart__defines_gacd6ffe5e9e3f555d07a3af7ee7fdf74a.html#gacd6ffe5e9e3f555d07a3af7ee7fdf74a">uart_enable</a>(UART1);</div>
</div><!-- fragment --> </div><!-- contents -->
<div class="ttc" id="agroup__uart__defines_gaf3ddb4b6b173fb6cd30139ac67ca62cb_html_gaf3ddb4b6b173fb6cd30139ac67ca62cb"><div class="ttname"><a href="group__uart__defines_gaf3ddb4b6b173fb6cd30139ac67ca62cb.html#gaf3ddb4b6b173fb6cd30139ac67ca62cb">uart_set_stopbits</a></div><div class="ttdeci">void uart_set_stopbits(uint32_t uart, uint8_t stopbits)</div><div class="ttdoc">Set UART stopbits.</div><div class="ttdef"><b>Definition:</b> uart.c:160</div></div>
<div class="ttc" id="agroup__uart__defines_gadafb5a1c4596fb687bdc99dff191d88f_html_gadafb5a1c4596fb687bdc99dff191d88f"><div class="ttname"><a href="group__uart__defines_gadafb5a1c4596fb687bdc99dff191d88f.html#gadafb5a1c4596fb687bdc99dff191d88f">uart_set_databits</a></div><div class="ttdeci">void uart_set_databits(uint32_t uart, uint8_t databits)</div><div class="ttdoc">Set UART databits.</div><div class="ttdef"><b>Definition:</b> uart.c:139</div></div>
<div class="ttc" id="agroup__uart__defines_gabc37af12e01b5827d40f5ed7d149076f_html_gabc37af12e01b5827d40f5ed7d149076f"><div class="ttname"><a href="group__uart__defines_gabc37af12e01b5827d40f5ed7d149076f.html#gabc37af12e01b5827d40f5ed7d149076f">uart_set_flow_control</a></div><div class="ttdeci">void uart_set_flow_control(uint32_t uart, enum uart_flowctl flow)</div><div class="ttdoc">Set the flow control scheme.</div><div class="ttdef"><b>Definition:</b> uart.c:216</div></div>
<div class="ttc" id="agroup__uart__defines_ga0167757699a14269e55640b5034ffcbf_html_ga0167757699a14269e55640b5034ffcbf"><div class="ttname"><a href="group__uart__defines_ga0167757699a14269e55640b5034ffcbf.html#ga0167757699a14269e55640b5034ffcbf">uart_disable</a></div><div class="ttdeci">void uart_disable(uint32_t uart)</div><div class="ttdoc">Disable the UART.</div><div class="ttdef"><b>Definition:</b> uart.c:103</div></div>
<div class="ttc" id="agroup__uart__defines_ga5e530a66e67a91f2cb782b9abce0d896_html_ga5e530a66e67a91f2cb782b9abce0d896"><div class="ttname"><a href="group__uart__defines_ga5e530a66e67a91f2cb782b9abce0d896.html#ga5e530a66e67a91f2cb782b9abce0d896">uart_set_baudrate</a></div><div class="ttdeci">BEGIN_DECLS void uart_set_baudrate(uint32_t uart, uint32_t baud)</div><div class="ttdoc">Set UART baudrate.</div><div class="ttdef"><b>Definition:</b> uart.c:114</div></div>
<div class="ttc" id="agroup__uart__defines_gacd6ffe5e9e3f555d07a3af7ee7fdf74a_html_gacd6ffe5e9e3f555d07a3af7ee7fdf74a"><div class="ttname"><a href="group__uart__defines_gacd6ffe5e9e3f555d07a3af7ee7fdf74a.html#gacd6ffe5e9e3f555d07a3af7ee7fdf74a">uart_enable</a></div><div class="ttdeci">void uart_enable(uint32_t uart)</div><div class="ttdoc">Enable the UART.</div><div class="ttdef"><b>Definition:</b> uart.c:93</div></div>
<div class="ttc" id="agroup__systemcontrol__defines_ga395012136af8db0d9fc18dad206b8a87_html_ga395012136af8db0d9fc18dad206b8a87"><div class="ttname"><a href="group__systemcontrol__defines_ga395012136af8db0d9fc18dad206b8a87.html#ga395012136af8db0d9fc18dad206b8a87">periph_clock_enable</a></div><div class="ttdeci">BEGIN_DECLS void periph_clock_enable(enum lm4f_clken periph)</div><div class="ttdoc">Enable the clock source for the peripheral.</div><div class="ttdef"><b>Definition:</b> systemcontrol.c:27</div></div>
<div class="ttc" id="agroup__uart__defines_ga7b0acac78989b94dab26d92d1b640e05_html_ga7b0acac78989b94dab26d92d1b640e05"><div class="ttname"><a href="group__uart__defines_ga7b0acac78989b94dab26d92d1b640e05.html#ga7b0acac78989b94dab26d92d1b640e05">uart_set_parity</a></div><div class="ttdeci">void uart_set_parity(uint32_t uart, enum uart_parity parity)</div><div class="ttdoc">Set UART parity.</div><div class="ttdef"><b>Definition:</b> uart.c:175</div></div>
<div class="ttc" id="agroup__uart__defines_gab9d2f5223bc6f08621e9b6d38f8a4fb9_html_gab9d2f5223bc6f08621e9b6d38f8a4fb9"><div class="ttname"><a href="group__uart__defines_gab9d2f5223bc6f08621e9b6d38f8a4fb9.html#gab9d2f5223bc6f08621e9b6d38f8a4fb9">uart_clock_from_piosc</a></div><div class="ttdeci">void uart_clock_from_piosc(uint32_t uart)</div><div class="ttdoc">Clock the UART module from the internal oscillator.</div><div class="ttdef"><b>Definition:</b> uart.c:238</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
