<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Portapack-Carnage: AVR PAL Support</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Portapack-Carnage
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">AVR PAL Support<div class="ingroups"><a class="el" href="group__platforms.html">Platforms</a> &raquo; <a class="el" href="group__AVR__DRIVERS.html">AVR Drivers</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for AVR PAL Support:</div>
<div class="dyncontent">
<div class="center"><img src="group__AVR__PAL.png" border="0" usemap="#group____AVR____PAL" alt=""/></div>
<map name="group____AVR____PAL" id="group____AVR____PAL">
<area shape="rect" title=" " alt="" coords="153,5,284,31"/>
<area shape="rect" href="group__AVR__DRIVERS.html" title=" " alt="" coords="5,5,105,31"/>
</map>
</div>
<p>The AVR PAL driver uses the PORT peripherals.</p>
<h1><a class="anchor" id="avr_pal_1"></a>
Supported HW resources</h1>
<ul>
<li>PORTA.</li>
<li>PORTB.</li>
<li>PORTC.</li>
<li>PORTD.</li>
<li>PORTE.</li>
<li>PORTF.</li>
<li>PORTG.</li>
</ul>
<h1><a class="anchor" id="avr_pal_2"></a>
AVR PAL driver implementation features</h1>
<p>The AVR PAL driver implementation fully supports the following hardware capabilities:</p><ul>
<li>8 bits wide ports.</li>
<li>Atomic set/reset functions.</li>
<li>Output latched regardless of the pad setting.</li>
<li>Direct read of input pads regardless of the pad setting.</li>
</ul>
<h1><a class="anchor" id="avr_pal_3"></a>
Supported PAL setup modes</h1>
<p>The AVR PAL driver supports the following I/O modes:</p><ul>
<li><code>PAL_MODE_RESET</code>.</li>
<li><code>PAL_MODE_UNCONNECTED</code>.</li>
<li><code>PAL_MODE_INPUT</code>.</li>
<li><code>PAL_MODE_INPUT_PULLUP</code>.</li>
<li><code>PAL_MODE_INPUT_ANALOG</code>.</li>
<li><code>PAL_MODE_OUTPUT_PUSHPULL</code>.</li>
</ul>
<p>Any attempt to setup an invalid mode is ignored.</p>
<h1><a class="anchor" id="avr_pal_4"></a>
Suboptimal behavior</h1>
<p>The AVR PORT is less than optimal in several areas, the limitations should be taken in account while using the PAL driver:</p><ul>
<li>Pad/port toggling operations are not atomic.</li>
<li>Pad/group mode setup is not atomic.</li>
<li>Group set+reset function is not atomic.</li>
<li>Writing on pads/groups/ports programmed as input with pull-up resistor changes the resistor setting because the output latch is used for resistor selection.</li>
<li>The PORT registers layout on some devices is not regular (it does not have contiguous PIN, DDR, PORT registers in this order), such ports cannot be accessed using the PAL driver. For example, PORT F on ATmega128. Verify the user manual of your device.</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
